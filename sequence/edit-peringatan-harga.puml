@startuml Sequence

skinparam maxMessageSize 250
hide footbox

mainframe **Interaksi** Edit Peringatan Harga

actor Investor as I
boundary "Halaman Detail Peringatan Harga" as HDP
boundary "Modal Edit Peringatan Harga" as MEPH
control "Price Alert Control" as PAC
entity "PriceAlert" as PA

ref over I, PA : Lihat Daftar Peringatan Harga

' User opens the price alert modal
I -> HDP : editPriceAlert(id)
activate HDP

HDP -> MEPH : showModal(id)
activate MEPH

' User submits form
I -> MEPH : submit(id, priceTarget)
activate MEPH

MEPH -> PAC : editPriceAlert(id, priceTarget)
activate PAC

'Validation step
PAC -> PAC : validate
activate PAC
deactivate PAC

alt invalid input
  PAC -->> MEPH : error
  MEPH -> MEPH : showError
else valid input
  PAC -> PA ** : get(id)
  activate PA

  PA -->> PAC : PriceAlert
  deactivate PA
end

PAC -> PA : update field (priceTarget)
activate PA

PA -->> PAC : done
deactivate PA

PAC -> PA : save
activate PA
PA -->> PAC : return
deactivate PA

PAC -->> MEPH : priceAlert
deactivate PAC

'Update UI and close modal
MEPH -> HDP : updatePriceAlertList
activate HDP

HDP -->> MEPH : return
deactivate HDP

MEPH -->> MEPH : hideModal
activate MEPH
deactivate MEPH
deactivate MEPH
deactivate MEPH

@enduml

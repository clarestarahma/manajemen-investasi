@startuml Sequence

skinparam maxMessageSize 250

hide footbox
autoactivate on

mainframe **sd** Tambah Kepemilikan Aset

actor Investor as I
boundary "Modal Tambah Kepemilikan Aset" as PTKA
boundary "Halaman Detail Portofolio" as TDP
control "Portofolio Control" as PC
entity "Portofolio" as P

ref over I, P : Lihat Detail Portofolio

I -> TDP : addOwnAsset
TDP -> PTKA : show

loop error != null
  I -> PTKA : submit(assetId, quantity)
  PTKA -> TDP : addOwnAsset(assetId, quantity, userId)
  TDP -> PC : addOwnAsset(assetId, quantity, userId)
  PC -> P : addOwnAsset(assetId, quantity, userId)
  P --> PC : ownAsset, error
  PC --> TDP : ownAsset, error

  opt error != null
    TDP -> PTKA : showError(error)
    deactivate PTKA
  end
end

TDP -> PTKA : closeModal
deactivate PTKA
@enduml
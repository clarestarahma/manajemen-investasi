@startuml Sequence

skinparam maxMessageSize 250
hide footbox

mainframe **Interaksi** Edit Portofolio

actor Investor as I
boundary "Halaman Detail Portofolio" as HDP
boundary "Modal Edit Portofolio" as MEP
control "Portofolio Control" as PC
entity "Portofolio" as P

ref over I, P : Lihat Daftar Portofolio

' User opens the portfolio modal
I -> HDP : editPortofolio(id)
activate HDP

HDP -> MEP : showModal(id)
activate MEP

' User submits form
I -> MEP : submit(id, name, currency, cashBalance)
activate MEP

MEP -> PC : editPortofolio(id, name, currency, cashBalance)
activate PC

'Validation step
PC -> PC : validate
activate PC
deactivate PC

alt invalid input
  PC -->> MEP : error
  MEP -->> MEP : showError
else valid input
  PC -> P ** : get(id)
  activate P

  P -->> PC : Portofolio
  deactivate P
end

  PC -> P : update field (name, currency, cashBalance)
  activate P

  P -->> PC : done
  deactivate P

  PC -> P : save
  activate P

  P -->> PC : return
  deactivate P

  PC -->> MEP : Portofolio
  deactivate PC

  'Update UI and close modal
  MEP -> HDP : updatePortofolioList
  activate HDP

  HDP -->> MEP : return
  deactivate HDP

  MEP -> MEP : hideModal
  activate MEP
  deactivate MEP
  deactivate MEP
  deactivate MEP

@enduml

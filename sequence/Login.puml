@startuml Sequence

hide footbox
autoactivate on

mainframe **sd** Login

actor "Pengguna"
boundary "Halaman Login" as HL
boundary "Form OTP" as FOTP
boundary "Halaman Dashboard" as D
control "Auth Control" as AC
' entity "Auth Service" as ASR
entity "User" as user

loop loginStatus = false
    Pengguna -> HL: submit
    HL -> HL: loginStatus = check 
    deactivate HL

    opt loginStatus = false
        HL -> HL: showError
        deactivate HL
    end
end 

HL -> AC : login(email, pass)
AC -> user : login(email, pass)
user --> AC : userStatus

alt userStatus = false
    AC -> HL : showError
    deactivate HL  
else userStatus = true 
    AC -> FOTP : show
    deactivate FOTP
end
    loop otpStatus = false
        Pengguna -> FOTP: submit
        FOTP -> FOTP: otpStatus = check
        deactivate FOTP
        opt otpStatus = false
            FOTP -> FOTP: showError
        end
    end

FOTP -> D : tampilkan
deactivate FOTP 


@enduml
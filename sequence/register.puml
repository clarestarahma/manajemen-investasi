@startuml Sequence

hide footbox
autoactivate on

actor "Pengguna"
boundary "Form Registrasi" as FR
boundary "Form OTP" as FOTP
boundary "Halaman Login" as HL
control "Auth Control" as AC
' entity "Auth Service" as ASR
entity "User" as user

loop registerStatus = false
    Pengguna -> FR: submit
    FR -> FR: registerStatus = check 
    deactivate FR

    opt registerStatus = false
        FR -> FR: showError
        deactivate FR
    end
end 

FR -> AC : register(email, pass)
AC -> user : create(email, pass)
user --> AC : userStatus

alt userStatus = false
    AC -> FR : showError
    deactivate FR  
else userStatus = true 
    AC -> FOTP : show
    deactivate FOTP
end
    loop otpStatus = false
        Pengguna -> FOTP: submit
        FOTP -> FOTP: otpStatus = check
        deactivate FOTP
    end
        opt otpStatus = false
            FOTP -> FOTP: showError
        end


@enduml


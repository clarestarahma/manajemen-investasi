@startuml Sequence

skinparam maxMessageSize 250

hide footbox
autoactivate on

mainframe **sd** Buat Peringatan Harga

actor Investor as I
boundary "Modal Buat Peringatan Harga" as PBPH
boundary "Tab Peringatan Harga" as TPH
control "Peringatan Harga Control" as PHC
entity "Peringatan Harga" as PH

ref over I, PH : Lihat Daftar Peringatan Harga

I -> TPH : newPriceAlert
TPH -> PBPH : show

loop error != null
  I -> PBPH : submit
  PBPH -> TPH : newPriceAlert(asset, currency, harga, userId)
  TPH -> PHC : newPriceAlert(asset, currency, harga, userId)
  PHC -> PH : save
  PH -->> PHC : priceAlert, error
  PHC -->> TPH : save, error

  opt error != null
    TPH -> PBPH : showError(error)
    deactivate PBPH
  end
end

TPH -> PBPH : closeModal
deactivate PBPH
@enduml
@startuml Sequence

skinparam maxMessageSize 250

hide footbox
autoactivate on

mainframe **sd** Buat Peringatan Harga

actor Investor as I
boundary "Modal Buat Peringatan Harga" as MBPH
control "Price Alert Control" as PAC
entity "PriceAlert" as PA

ref over I, PA : Lihat Daftar Peringatan Harga

' User opens the price alert modal
I -> TPH : createPriceAlert
activate TPH

TPH -> MBPH : showModal
activate MBPH

'User submits form
I -> MBPH : submit(asset, currency, priceTarget)
activate MBPH

MBPH -> PAC : createPriceAlert(asset, currency, priceTarget)
activate PAC

'Validation step
PAC -> PAC : validate
activate PAC
deactivate PAC

alt invalid input
  PAC -->> MBPH : error
  MBPH -> MBPH : showError
else valid input
  'Create and save the PriceAlert entity
  PAC -> PA ** : new PriceAlert(userId, asset, currency, priceTarget)
  activate PA
  PA -->> PAC : PriceAlert
  deactivate PA
end

TPH -> PBPH : closeModal
deactivate PBPH
@enduml